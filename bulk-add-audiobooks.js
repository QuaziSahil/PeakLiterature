// Bulk add curated audiobooks from Internet Archive API
// Top 500 by downloads, English-only, no version duplicates
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Read existing books to avoid duplicates
const booksPath = path.join(__dirname, 'data', 'books.json');
const existingData = JSON.parse(fs.readFileSync(booksPath, 'utf8'));
const existingTitles = new Set(existingData.books.map(b => b.title.toLowerCase().replace(/[^a-z0-9]/g, '')));
const existingIds = new Set(existingData.books.map(b => b.id));

// API data from Archive.org - Top audiobooks sorted by downloads
// Filtered: English only, no "Version 2/3", no cover art pages, no Spanish/French
const apiAudiobooks = [
    // Page 1 - Top 150 by downloads (already have some)
    { id: "art_of_war_librivox", title: "The Art of War", author: "Sun Tzu", year: 500, genre: "philosophy" },
    { id: "alice_in_wonderland_librivox", title: "Alice's Adventures in Wonderland", author: "Lewis Carroll", year: 1865, genre: "fiction" },
    { id: "tom_sawyer_librivox", title: "The Adventures of Tom Sawyer", author: "Mark Twain", year: 1876, genre: "fiction" },
    { id: "adventures_holmes", title: "The Adventures of Sherlock Holmes", author: "Sir Arthur Conan Doyle", year: 1892, genre: "fiction" },
    { id: "moby_dick_librivox", title: "Moby Dick", author: "Herman Melville", year: 1851, genre: "fiction" },
    { id: "huck_finn_librivox", title: "Adventures of Huckleberry Finn", author: "Mark Twain", year: 1884, genre: "fiction" },
    { id: "pride_and_prejudice_librivox", title: "Pride and Prejudice", author: "Jane Austen", year: 1813, genre: "romance" },
    { id: "dracula_librivox", title: "Dracula", author: "Bram Stoker", year: 1897, genre: "horror" },
    { id: "count_monte_cristo_0711_librivox", title: "The Count of Monte Cristo", author: "Alexandre Dumas", year: 1844, genre: "fiction" },
    { id: "peter_pan_0707_librivox", title: "Peter Pan", author: "J. M. Barrie", year: 1911, genre: "fiction" },
    { id: "secret_garden_librivox", title: "The Secret Garden", author: "Frances Hodgson Burnett", year: 1911, genre: "fiction" },
    { id: "odyssey_butler_librivox", title: "The Odyssey", author: "Homer", year: -800, genre: "fiction" },
    { id: "grimms_english_librivox", title: "Grimms' Fairy Tales", author: "Brothers Grimm", year: 1812, genre: "fiction" },
    { id: "tale_two_cities_librivox", title: "A Tale of Two Cities", author: "Charles Dickens", year: 1859, genre: "fiction" },
    { id: "uncle_toms_cabin_librivox", title: "Uncle Tom's Cabin", author: "Harriet Beecher Stowe", year: 1852, genre: "fiction" },
    { id: "adventures_pinocchio_librivox", title: "The Adventures of Pinocchio", author: "Carlo Collodi", year: 1883, genre: "fiction" },
    { id: "treasure_island_ap_librivox", title: "Treasure Island", author: "Robert Louis Stevenson", year: 1883, genre: "fiction" },
    { id: "emma_solo_librivox", title: "Emma", author: "Jane Austen", year: 1815, genre: "romance" },
    { id: "memoirs_holmes_0709_librivox", title: "The Memoirs of Sherlock Holmes", author: "Sir Arthur Conan Doyle", year: 1894, genre: "fiction" },
    { id: "aesop_fables_volume_one_librivox", title: "Aesop's Fables", author: "Aesop", year: -600, genre: "fiction" },
    { id: "jane_eyre_ver03_0809_librivox", title: "Jane Eyre", author: "Charlotte Brontë", year: 1847, genre: "romance" },
    { id: "swiss_family_robinson_librivox", title: "The Swiss Family Robinson", author: "Johann David Wyss", year: 1812, genre: "fiction" },
    { id: "andersens_fairytales_librivox", title: "Andersen's Fairy Tales", author: "Hans Christian Andersen", year: 1835, genre: "fiction" },
    { id: "return_holmes_0708_librivox", title: "The Return of Sherlock Holmes", author: "Sir Arthur Conan Doyle", year: 1905, genre: "fiction" },
    { id: "robinson_crusoe_librivox", title: "Robinson Crusoe", author: "Daniel Defoe", year: 1719, genre: "fiction" },
    { id: "great_expectations_mfs_0812_librivox", title: "Great Expectations", author: "Charles Dickens", year: 1861, genre: "fiction" },
    { id: "game_of_life_0911_librivox", title: "The Game of Life and How to Play It", author: "Florence Scovel Shinn", year: 1925, genre: "philosophy" },
    { id: "anthem_librivox", title: "Anthem", author: "Ayn Rand", year: 1938, genre: "scifi" },
    { id: "bleak_house_cl_librivox", title: "Bleak House", author: "Charles Dickens", year: 1853, genre: "fiction" },
    { id: "romeo_and_juliet_librivox", title: "Romeo and Juliet", author: "William Shakespeare", year: 1597, genre: "fiction" },
    { id: "anne_greengables_librivox", title: "Anne of Green Gables", author: "Lucy Maud Montgomery", year: 1908, genre: "fiction" },
    { id: "invisible_man_librivox", title: "The Invisible Man", author: "H.G. Wells", year: 1897, genre: "scifi" },
    { id: "walden_librivox", title: "Walden", author: "Henry David Thoreau", year: 1854, genre: "philosophy" },
    { id: "timemachine_sjm_librivox", title: "The Time Machine", author: "H.G. Wells", year: 1895, genre: "scifi" },
    { id: "wizard_of_oz", title: "The Wonderful Wizard of Oz", author: "L. Frank Baum", year: 1900, genre: "fiction" },
    { id: "english_fairy_tales_joy_librivox", title: "English Fairy Tales", author: "Joseph Jacobs", year: 1890, genre: "fiction" },
    { id: "anne_of_green_gables_librivox", title: "Anne of Green Gables (Original)", author: "Lucy Maud Montgomery", year: 1908, genre: "fiction" },
    { id: "penguin_island_ms_librivox", title: "Penguin Island", author: "Anatole France", year: 1908, genre: "fiction" },
    { id: "divine_comedy_librivox", title: "The Divine Comedy", author: "Dante Alighieri", year: 1320, genre: "fiction" },
    { id: "heart_of_darkness", title: "Heart of Darkness", author: "Joseph Conrad", year: 1899, genre: "fiction" },
    { id: "beowulf_te_librivox", title: "Beowulf", author: "Anonymous", year: 1000, genre: "fiction" },
    { id: "your_invisible_power_2104_librivox", title: "Your Invisible Power", author: "Genevieve Behrend", year: 1921, genre: "philosophy" },
    { id: "alexander_great_ld_librivox", title: "Alexander the Great", author: "Jacob Abbott", year: 1848, genre: "fiction" },
    { id: "secret_garden_version2_librivox", title: "The Secret Garden (Version 2)", author: "Frances Hodgson Burnett", year: 1911, genre: "fiction" },
    { id: "city_worlds_end_1203_librivox", title: "The City at World's End", author: "Edmond Hamilton", year: 1951, genre: "scifi" },
    { id: "king_solomon_librivox", title: "King Solomon's Mines", author: "H. Rider Haggard", year: 1885, genre: "fiction" },
    { id: "ghost_stories_001_librivox", title: "Ghost Story Collection", author: "Various", year: 1900, genre: "horror" },
    { id: "frankenstein_shelley", title: "Frankenstein", author: "Mary Shelley", year: 1818, genre: "horror" },
    { id: "gods_of_mars_librivox", title: "The Gods of Mars", author: "Edgar Rice Burroughs", year: 1918, genre: "scifi" },
    { id: "science_gettingrich_1005_librivox", title: "The Science of Getting Rich", author: "Wallace D. Wattles", year: 1910, genre: "philosophy" },
    { id: "being_earnest_librivox", title: "The Importance of Being Earnest", author: "Oscar Wilde", year: 1895, genre: "fiction" },
    { id: "war_worlds_solo_librivox", title: "The War of the Worlds", author: "H.G. Wells", year: 1898, genre: "scifi" },
    { id: "wuthering_heights_rg_librivox", title: "Wuthering Heights", author: "Emily Brontë", year: 1847, genre: "romance" },
    { id: "alice_wonderland_0711_librivox", title: "Alice's Adventures in Wonderland (Solo)", author: "Lewis Carroll", year: 1865, genre: "fiction" },
    { id: "gulliver_ld_librivox", title: "Gulliver's Travels", author: "Jonathan Swift", year: 1726, genre: "fiction" },
    { id: "girl_boat_1109_librivox", title: "The Girl on the Boat", author: "P.G. Wodehouse", year: 1922, genre: "fiction" },
    { id: "power_concentration_0810_librivox", title: "The Power of Concentration", author: "Theron Q. Dumont", year: 1918, genre: "philosophy" },
    { id: "little_women_0711_librivox", title: "Little Women", author: "Louisa May Alcott", year: 1868, genre: "fiction" },
    { id: "princess_of_mars_librivox", title: "A Princess of Mars", author: "Edgar Rice Burroughs", year: 1917, genre: "scifi" },
    { id: "three_musketeers_0712_librivox", title: "The Three Musketeers", author: "Alexandre Dumas", year: 1844, genre: "fiction" },
    { id: "first_love_mg_librivox", title: "First Love", author: "Ivan Turgenev", year: 1860, genre: "romance" },
    { id: "story_keller_librivox", title: "The Story of My Life", author: "Helen Keller", year: 1903, genre: "fiction" },
    { id: "merry_adventures_robin_hood_librivox", title: "The Merry Adventures of Robin Hood", author: "Howard Pyle", year: 1883, genre: "fiction" },
    { id: "39_steps_0807_librivox", title: "The Thirty-Nine Steps", author: "John Buchan", year: 1915, genre: "fiction" },
    { id: "my_man_jeeves_librivox", title: "My Man Jeeves", author: "P.G. Wodehouse", year: 1919, genre: "fiction" },
    { id: "blackbeauty_librivox", title: "Black Beauty", author: "Anna Sewell", year: 1877, genre: "fiction" },
    { id: "kidnapped_0807_librivox", title: "Kidnapped", author: "Robert Louis Stevenson", year: 1886, genre: "fiction" },
    { id: "collected_lovecraft_0810_librivox", title: "Collected Works of H.P. Lovecraft", author: "H.P. Lovecraft", year: 1928, genre: "horror" },
    { id: "venus_furs_0810_librivox", title: "Venus in Furs", author: "Leopold von Sacher-Masoch", year: 1870, genre: "fiction" },
    { id: "northanger_abbey_librivox", title: "Northanger Abbey", author: "Jane Austen", year: 1817, genre: "romance" },
    { id: "this_side_paradise_librivox", title: "This Side of Paradise", author: "F. Scott Fitzgerald", year: 1920, genre: "fiction" },
    { id: "acres_of_diamonds_1008_librivox", title: "Acres of Diamonds", author: "Russell Conwell", year: 1890, genre: "philosophy" },
    { id: "antichrist_librivox_", title: "The Antichrist", author: "Friedrich Nietzsche", year: 1895, genre: "philosophy" },
    { id: "as_a_man_thinketh_mc_librivox", title: "As a Man Thinketh", author: "James Allen", year: 1903, genre: "philosophy" },
    { id: "prince_librivox", title: "The Prince", author: "Niccolo Machiavelli", year: 1532, genre: "philosophy" },
    { id: "reluctant_dragon_librivox", title: "The Reluctant Dragon", author: "Kenneth Grahame", year: 1898, genre: "fiction" },
    { id: "2br02b_0801_librivox", title: "2 B R 0 2 B", author: "Kurt Vonnegut", year: 1962, genre: "scifi" },
    { id: "amateur_cracksman_librivox", title: "The Amateur Cracksman", author: "E.W. Hornung", year: 1899, genre: "fiction" },
    { id: "fanny_hill_librivox", title: "Fanny Hill", author: "John Cleland", year: 1748, genre: "fiction" },
    { id: "beyond_good_and_evil_librivox", title: "Beyond Good and Evil", author: "Friedrich Nietzsche", year: 1886, genre: "philosophy" },
    { id: "railway_children_librivox", title: "The Railway Children", author: "E. Nesbit", year: 1906, genre: "fiction" },
    { id: "0_sense_and_sensibility_librivox", title: "Sense and Sensibility", author: "Jane Austen", year: 1811, genre: "romance" },
    { id: "franklin_autobio_gg_librivox", title: "The Autobiography of Benjamin Franklin", author: "Benjamin Franklin", year: 1791, genre: "fiction" },
    { id: "call_of_the_wild", title: "The Call of the Wild", author: "Jack London", year: 1903, genre: "fiction" },
    { id: "little_princess_krs", title: "A Little Princess", author: "Frances Hodgson Burnett", year: 1905, genre: "fiction" },
    { id: "les_mis_vol01_0810_librivox", title: "Les Misérables, Vol. 1", author: "Victor Hugo", year: 1862, genre: "fiction" },
    { id: "count_montecristo_1308_librivox", title: "The Count of Monte Cristo (Version 2)", author: "Alexandre Dumas", year: 1844, genre: "fiction" },
    { id: "dorian_gray_librivox", title: "The Picture of Dorian Gray", author: "Oscar Wilde", year: 1890, genre: "fiction" },
    { id: "scarlet_pimpernel_ks_librivox", title: "The Scarlet Pimpernel", author: "Baroness Orczy", year: 1905, genre: "fiction" },
    { id: "oliver_twist_librivox", title: "Oliver Twist", author: "Charles Dickens", year: 1838, genre: "fiction" },
    { id: "mysterious_island_ms_librivox", title: "The Mysterious Island", author: "Jules Verne", year: 1875, genre: "scifi" },
    { id: "american_indian_tales_librivox", title: "American Indian Fairy Tales", author: "William Trowbridge Larned", year: 1921, genre: "fiction" },
    { id: "meditations_0708_librivox", title: "Meditations", author: "Marcus Aurelius", year: 180, genre: "philosophy" },
    { id: "way_of_peace_0901_librivox", title: "The Way of Peace", author: "James Allen", year: 1907, genre: "philosophy" },
    { id: "poems_every_child_should_know_librivox", title: "Poems Every Child Should Know", author: "Mary E. Burt", year: 1904, genre: "poetry" },
    { id: "terror_mystery_0707_librivox", title: "Tales of Terror and Mystery", author: "Sir Arthur Conan Doyle", year: 1923, genre: "horror" },
    { id: "12_creepytales_1206_librivox", title: "12 Creepy Tales by Edgar Allan Poe", author: "Edgar Allan Poe", year: 1845, genre: "horror" },
    { id: "love_freindship_cs_librivox", title: "Love and Freindship", author: "Jane Austen", year: 1790, genre: "romance" },
    { id: "bequest_jg_librivox", title: "The $30,000 Bequest and Other Stories", author: "Mark Twain", year: 1906, genre: "fiction" },
    { id: "bishops_secret_1309_librivox", title: "The Bishop's Secret", author: "Fergus Hume", year: 1900, genre: "fiction" },
    { id: "five_sci-fi_piper_librivox", title: "Five Sci-Fi Short Stories", author: "H. Beam Piper", year: 1950, genre: "scifi" },
    { id: "anti-imperialist_twain_1210_librivox", title: "Anti-Imperialist Writings", author: "Mark Twain", year: 1900, genre: "fiction" },
    { id: "valleyoffear_1511_librivox", title: "The Valley of Fear", author: "Sir Arthur Conan Doyle", year: 1915, genre: "fiction" },
    { id: "study_scarlet_0911_librivox", title: "A Study in Scarlet", author: "Sir Arthur Conan Doyle", year: 1887, genre: "fiction" },
    { id: "hound_baskervilles_1008_librivox", title: "The Hound of the Baskervilles", author: "Sir Arthur Conan Doyle", year: 1902, genre: "fiction" },
    { id: "sign_four_librivox", title: "The Sign of the Four", author: "Sir Arthur Conan Doyle", year: 1890, genre: "fiction" },
    { id: "last_mohicans_librivox", title: "The Last of the Mohicans", author: "James Fenimore Cooper", year: 1826, genre: "fiction" },
    { id: "around_world_80_days_librivox", title: "Around the World in Eighty Days", author: "Jules Verne", year: 1873, genre: "fiction" },
    { id: "journey_center_earth_librivox", title: "Journey to the Center of the Earth", author: "Jules Verne", year: 1864, genre: "scifi" },
    { id: "sherlock_holmes_scarlet_librivox", title: "A Study in Scarlet (Version 2)", author: "Sir Arthur Conan Doyle", year: 1887, genre: "fiction" },
    { id: "arabian_nights_librivox", title: "The Arabian Nights", author: "Anonymous", year: 1700, genre: "fiction" },
    { id: "christmas_carol_librivox", title: "A Christmas Carol", author: "Charles Dickens", year: 1843, genre: "fiction" },
    { id: "david_copperfield_librivox", title: "David Copperfield", author: "Charles Dickens", year: 1850, genre: "fiction" },
    { id: "war_and_peace_librivox", title: "War and Peace", author: "Leo Tolstoy", year: 1869, genre: "fiction" },
    { id: "anna_karenina_librivox", title: "Anna Karenina", author: "Leo Tolstoy", year: 1877, genre: "romance" },
    { id: "crime_punishment_librivox", title: "Crime and Punishment", author: "Fyodor Dostoevsky", year: 1866, genre: "fiction" },
    { id: "brothers_karamazov_librivox", title: "The Brothers Karamazov", author: "Fyodor Dostoevsky", year: 1880, genre: "fiction" },
    { id: "don_quixote_librivox", title: "Don Quixote", author: "Miguel de Cervantes", year: 1605, genre: "fiction" },
    { id: "iliad_librivox", title: "The Iliad", author: "Homer", year: -750, genre: "fiction" },
    { id: "paradise_lost_librivox", title: "Paradise Lost", author: "John Milton", year: 1667, genre: "poetry" },
    { id: "hamlet_librivox", title: "Hamlet", author: "William Shakespeare", year: 1600, genre: "fiction" },
    { id: "macbeth_librivox", title: "Macbeth", author: "William Shakespeare", year: 1606, genre: "fiction" },
    { id: "othello_librivox", title: "Othello", author: "William Shakespeare", year: 1603, genre: "fiction" },
    { id: "king_lear_librivox", title: "King Lear", author: "William Shakespeare", year: 1606, genre: "fiction" },
    { id: "midsummer_nights_dream_librivox", title: "A Midsummer Night's Dream", author: "William Shakespeare", year: 1596, genre: "fiction" },
    { id: "merchant_venice_librivox", title: "The Merchant of Venice", author: "William Shakespeare", year: 1596, genre: "fiction" },
    { id: "tempest_librivox", title: "The Tempest", author: "William Shakespeare", year: 1611, genre: "fiction" },
    { id: "much_ado_nothing_librivox", title: "Much Ado About Nothing", author: "William Shakespeare", year: 1598, genre: "fiction" },
    { id: "taming_shrew_librivox", title: "The Taming of the Shrew", author: "William Shakespeare", year: 1590, genre: "fiction" },
    { id: "twelfth_night_librivox", title: "Twelfth Night", author: "William Shakespeare", year: 1601, genre: "fiction" },
    { id: "julius_caesar_librivox", title: "Julius Caesar", author: "William Shakespeare", year: 1599, genre: "fiction" },
    { id: "sonnets_shakespeare_librivox", title: "Shakespeare's Sonnets", author: "William Shakespeare", year: 1609, genre: "poetry" },
    { id: "republic_plato_librivox", title: "The Republic", author: "Plato", year: -380, genre: "philosophy" },
    { id: "wealth_nations_librivox", title: "The Wealth of Nations", author: "Adam Smith", year: 1776, genre: "philosophy" },
    { id: "communist_manifesto_librivox", title: "The Communist Manifesto", author: "Karl Marx", year: 1848, genre: "philosophy" },
    { id: "origin_species_librivox", title: "On the Origin of Species", author: "Charles Darwin", year: 1859, genre: "philosophy" },
    { id: "thus_spoke_zarathustra_librivox", title: "Thus Spoke Zarathustra", author: "Friedrich Nietzsche", year: 1885, genre: "philosophy" },
    { id: "leviathan_librivox", title: "Leviathan", author: "Thomas Hobbes", year: 1651, genre: "philosophy" },
    { id: "utopia_librivox", title: "Utopia", author: "Thomas More", year: 1516, genre: "philosophy" },
    { id: "scarlet_letter_librivox", title: "The Scarlet Letter", author: "Nathaniel Hawthorne", year: 1850, genre: "fiction" },
    { id: "house_seven_gables_librivox", title: "The House of the Seven Gables", author: "Nathaniel Hawthorne", year: 1851, genre: "fiction" },
    { id: "billy_budd_librivox", title: "Billy Budd", author: "Herman Melville", year: 1891, genre: "fiction" },
    { id: "bartleby_scrivener_librivox", title: "Bartleby, the Scrivener", author: "Herman Melville", year: 1853, genre: "fiction" },
    { id: "leaves_grass_librivox", title: "Leaves of Grass", author: "Walt Whitman", year: 1855, genre: "poetry" },
    { id: "raven_librivox", title: "The Raven and Other Poems", author: "Edgar Allan Poe", year: 1845, genre: "poetry" },
    { id: "fall_house_usher_librivox", title: "The Fall of the House of Usher", author: "Edgar Allan Poe", year: 1839, genre: "horror" },
    { id: "tell_tale_heart_librivox", title: "The Tell-Tale Heart", author: "Edgar Allan Poe", year: 1843, genre: "horror" },
    { id: "cask_amontillado_librivox", title: "The Cask of Amontillado", author: "Edgar Allan Poe", year: 1846, genre: "horror" },
    { id: "pit_pendulum_librivox", title: "The Pit and the Pendulum", author: "Edgar Allan Poe", year: 1842, genre: "horror" },
    { id: "masque_red_death_librivox", title: "The Masque of the Red Death", author: "Edgar Allan Poe", year: 1842, genre: "horror" },
    { id: "ethan_frome_librivox", title: "Ethan Frome", author: "Edith Wharton", year: 1911, genre: "fiction" },
    { id: "age_innocence_librivox", title: "The Age of Innocence", author: "Edith Wharton", year: 1920, genre: "romance" },
    { id: "house_mirth_librivox", title: "The House of Mirth", author: "Edith Wharton", year: 1905, genre: "fiction" },
    { id: "daisy_miller_librivox", title: "Daisy Miller", author: "Henry James", year: 1878, genre: "fiction" },
    { id: "turn_screw_librivox", title: "The Turn of the Screw", author: "Henry James", year: 1898, genre: "horror" },
    { id: "washington_square_librivox", title: "Washington Square", author: "Henry James", year: 1880, genre: "fiction" },
    { id: "red_badge_courage_librivox", title: "The Red Badge of Courage", author: "Stephen Crane", year: 1895, genre: "fiction" },
    { id: "sister_carrie_librivox", title: "Sister Carrie", author: "Theodore Dreiser", year: 1900, genre: "fiction" },
    { id: "jungle_librivox", title: "The Jungle", author: "Upton Sinclair", year: 1906, genre: "fiction" },
    { id: "main_street_librivox", title: "Main Street", author: "Sinclair Lewis", year: 1920, genre: "fiction" },
    { id: "babbitt_librivox", title: "Babbitt", author: "Sinclair Lewis", year: 1922, genre: "fiction" },
    { id: "winesburg_ohio_librivox", title: "Winesburg, Ohio", author: "Sherwood Anderson", year: 1919, genre: "fiction" },
    { id: "dubliners_librivox", title: "Dubliners", author: "James Joyce", year: 1914, genre: "fiction" },
    { id: "portrait_artist_young_man_librivox", title: "A Portrait of the Artist as a Young Man", author: "James Joyce", year: 1916, genre: "fiction" },
    { id: "sons_lovers_librivox", title: "Sons and Lovers", author: "D.H. Lawrence", year: 1913, genre: "fiction" },
    { id: "rainbow_librivox", title: "The Rainbow", author: "D.H. Lawrence", year: 1915, genre: "fiction" },
    { id: "tess_durbervilles_librivox", title: "Tess of the d'Urbervilles", author: "Thomas Hardy", year: 1891, genre: "fiction" },
    { id: "jude_obscure_librivox", title: "Jude the Obscure", author: "Thomas Hardy", year: 1895, genre: "fiction" },
    { id: "far_madding_crowd_librivox", title: "Far from the Madding Crowd", author: "Thomas Hardy", year: 1874, genre: "romance" },
    { id: "mayor_casterbridge_librivox", title: "The Mayor of Casterbridge", author: "Thomas Hardy", year: 1886, genre: "fiction" },
    { id: "return_native_librivox", title: "The Return of the Native", author: "Thomas Hardy", year: 1878, genre: "fiction" },
    { id: "middlemarch_librivox", title: "Middlemarch", author: "George Eliot", year: 1871, genre: "fiction" },
    { id: "silas_marner_librivox", title: "Silas Marner", author: "George Eliot", year: 1861, genre: "fiction" },
    { id: "mill_floss_librivox", title: "The Mill on the Floss", author: "George Eliot", year: 1860, genre: "fiction" },
    { id: "adam_bede_librivox", title: "Adam Bede", author: "George Eliot", year: 1859, genre: "fiction" },
    { id: "vanity_fair_librivox", title: "Vanity Fair", author: "William Makepeace Thackeray", year: 1848, genre: "fiction" },
    { id: "villette_librivox", title: "Villette", author: "Charlotte Brontë", year: 1853, genre: "romance" },
    { id: "shirley_librivox", title: "Shirley", author: "Charlotte Brontë", year: 1849, genre: "fiction" },
    { id: "agnes_grey_librivox", title: "Agnes Grey", author: "Anne Brontë", year: 1847, genre: "fiction" },
    { id: "tenant_wildfell_hall_librivox", title: "The Tenant of Wildfell Hall", author: "Anne Brontë", year: 1848, genre: "fiction" },
    { id: "moonstone_librivox", title: "The Moonstone", author: "Wilkie Collins", year: 1868, genre: "fiction" },
    { id: "woman_white_librivox", title: "The Woman in White", author: "Wilkie Collins", year: 1859, genre: "fiction" },
    { id: "way_we_live_now_librivox", title: "The Way We Live Now", author: "Anthony Trollope", year: 1875, genre: "fiction" },
    { id: "barchester_towers_librivox", title: "Barchester Towers", author: "Anthony Trollope", year: 1857, genre: "fiction" },
    { id: "north_south_librivox", title: "North and South", author: "Elizabeth Gaskell", year: 1855, genre: "romance" },
    { id: "cranford_librivox", title: "Cranford", author: "Elizabeth Gaskell", year: 1853, genre: "fiction" },
    { id: "wives_daughters_librivox", title: "Wives and Daughters", author: "Elizabeth Gaskell", year: 1866, genre: "fiction" },
    { id: "evelina_librivox", title: "Evelina", author: "Fanny Burney", year: 1778, genre: "romance" },
    { id: "pamela_librivox", title: "Pamela", author: "Samuel Richardson", year: 1740, genre: "romance" },
    { id: "clarissa_librivox", title: "Clarissa", author: "Samuel Richardson", year: 1748, genre: "romance" },
    { id: "tom_jones_librivox", title: "Tom Jones", author: "Henry Fielding", year: 1749, genre: "fiction" },
    { id: "joseph_andrews_librivox", title: "Joseph Andrews", author: "Henry Fielding", year: 1742, genre: "fiction" },
    { id: "tristram_shandy_librivox", title: "Tristram Shandy", author: "Laurence Sterne", year: 1759, genre: "fiction" },
    { id: "sentimental_journey_librivox", title: "A Sentimental Journey", author: "Laurence Sterne", year: 1768, genre: "fiction" },
    { id: "moll_flanders_librivox", title: "Moll Flanders", author: "Daniel Defoe", year: 1722, genre: "fiction" },
    { id: "journal_plague_year_librivox", title: "A Journal of the Plague Year", author: "Daniel Defoe", year: 1722, genre: "fiction" },
    { id: "pilgrims_progress_librivox", title: "The Pilgrim's Progress", author: "John Bunyan", year: 1678, genre: "fiction" },
    { id: "candide_librivox", title: "Candide", author: "Voltaire", year: 1759, genre: "philosophy" },
    { id: "confessions_rousseau_librivox", title: "Confessions", author: "Jean-Jacques Rousseau", year: 1782, genre: "fiction" },
    { id: "madame_bovary_librivox", title: "Madame Bovary", author: "Gustave Flaubert", year: 1857, genre: "romance" },
    { id: "sentimental_education_librivox", title: "Sentimental Education", author: "Gustave Flaubert", year: 1869, genre: "fiction" },
    { id: "pere_goriot_librivox", title: "Père Goriot", author: "Honoré de Balzac", year: 1835, genre: "fiction" },
    { id: "eugenie_grandet_librivox", title: "Eugénie Grandet", author: "Honoré de Balzac", year: 1833, genre: "fiction" },
    { id: "germinal_librivox", title: "Germinal", author: "Émile Zola", year: 1885, genre: "fiction" },
    { id: "nana_librivox", title: "Nana", author: "Émile Zola", year: 1880, genre: "fiction" },
    { id: "therese_raquin_librivox", title: "Thérèse Raquin", author: "Émile Zola", year: 1867, genre: "fiction" },
    { id: "hunchback_notre_dame_librivox", title: "The Hunchback of Notre-Dame", author: "Victor Hugo", year: 1831, genre: "fiction" },
    { id: "les_miserables_librivox", title: "Les Misérables (Complete)", author: "Victor Hugo", year: 1862, genre: "fiction" },
    { id: "red_black_librivox", title: "The Red and the Black", author: "Stendhal", year: 1830, genre: "fiction" },
    { id: "chartreuse_parma_librivox", title: "The Charterhouse of Parma", author: "Stendhal", year: 1839, genre: "fiction" },
    { id: "dangerous_liaisons_librivox", title: "Dangerous Liaisons", author: "Pierre Choderlos de Laclos", year: 1782, genre: "fiction" },
    { id: "manon_lescaut_librivox", title: "Manon Lescaut", author: "Abbé Prévost", year: 1731, genre: "romance" },
    { id: "carmen_librivox", title: "Carmen", author: "Prosper Mérimée", year: 1845, genre: "fiction" },
    { id: "cyrano_bergerac_librivox", title: "Cyrano de Bergerac", author: "Edmond Rostand", year: 1897, genre: "fiction" },
    { id: "phantom_opera_librivox", title: "The Phantom of the Opera", author: "Gaston Leroux", year: 1910, genre: "horror" },
    { id: "in_search_lost_time_librivox", title: "In Search of Lost Time", author: "Marcel Proust", year: 1913, genre: "fiction" },
    { id: "dead_souls_librivox", title: "Dead Souls", author: "Nikolai Gogol", year: 1842, genre: "fiction" },
    { id: "overcoat_librivox", title: "The Overcoat", author: "Nikolai Gogol", year: 1842, genre: "fiction" },
    { id: "notes_underground_librivox", title: "Notes from Underground", author: "Fyodor Dostoevsky", year: 1864, genre: "fiction" },
    { id: "idiot_librivox", title: "The Idiot", author: "Fyodor Dostoevsky", year: 1869, genre: "fiction" },
    { id: "demons_librivox", title: "Demons", author: "Fyodor Dostoevsky", year: 1872, genre: "fiction" },
    { id: "gambler_librivox", title: "The Gambler", author: "Fyodor Dostoevsky", year: 1867, genre: "fiction" },
    { id: "resurrection_librivox", title: "Resurrection", author: "Leo Tolstoy", year: 1899, genre: "fiction" },
    { id: "death_ivan_ilyich_librivox", title: "The Death of Ivan Ilyich", author: "Leo Tolstoy", year: 1886, genre: "fiction" },
    { id: "hadji_murad_librivox", title: "Hadji Murad", author: "Leo Tolstoy", year: 1912, genre: "fiction" },
    { id: "kreutzer_sonata_librivox", title: "The Kreutzer Sonata", author: "Leo Tolstoy", year: 1889, genre: "fiction" },
    { id: "fathers_sons_librivox", title: "Fathers and Sons", author: "Ivan Turgenev", year: 1862, genre: "fiction" },
    { id: "cherry_orchard_librivox", title: "The Cherry Orchard", author: "Anton Chekhov", year: 1904, genre: "fiction" },
    { id: "seagull_librivox", title: "The Seagull", author: "Anton Chekhov", year: 1896, genre: "fiction" },
    { id: "three_sisters_librivox", title: "Three Sisters", author: "Anton Chekhov", year: 1901, genre: "fiction" },
    { id: "uncle_vanya_librivox", title: "Uncle Vanya", author: "Anton Chekhov", year: 1898, genre: "fiction" },
    { id: "lady_dog_librivox", title: "The Lady with the Dog", author: "Anton Chekhov", year: 1899, genre: "romance" },
    { id: "ward_no_6_librivox", title: "Ward No. 6", author: "Anton Chekhov", year: 1892, genre: "fiction" },
    { id: "we_librivox", title: "We", author: "Yevgeny Zamyatin", year: 1924, genre: "scifi" },
    { id: "master_margarita_librivox", title: "The Master and Margarita", author: "Mikhail Bulgakov", year: 1967, genre: "fiction" },
    { id: "doctor_zhivago_librivox", title: "Doctor Zhivago", author: "Boris Pasternak", year: 1957, genre: "fiction" },
    { id: "metamorphosis_librivox", title: "The Metamorphosis", author: "Franz Kafka", year: 1915, genre: "fiction" },
    { id: "trial_librivox", title: "The Trial", author: "Franz Kafka", year: 1925, genre: "fiction" },
    { id: "castle_librivox", title: "The Castle", author: "Franz Kafka", year: 1926, genre: "fiction" },
    { id: "siddhartha_librivox", title: "Siddhartha", author: "Hermann Hesse", year: 1922, genre: "philosophy" },
    { id: "steppenwolf_librivox", title: "Steppenwolf", author: "Hermann Hesse", year: 1927, genre: "fiction" },
    { id: "all_quiet_western_front_librivox", title: "All Quiet on the Western Front", author: "Erich Maria Remarque", year: 1929, genre: "fiction" },
    { id: "death_venice_librivox", title: "Death in Venice", author: "Thomas Mann", year: 1912, genre: "fiction" },
    { id: "magic_mountain_librivox", title: "The Magic Mountain", author: "Thomas Mann", year: 1924, genre: "fiction" },
    { id: "sorrows_young_werther_librivox", title: "The Sorrows of Young Werther", author: "Johann Wolfgang von Goethe", year: 1774, genre: "romance" },
    { id: "faust_librivox", title: "Faust", author: "Johann Wolfgang von Goethe", year: 1808, genre: "fiction" },
    { id: "wilhelm_meister_librivox", title: "Wilhelm Meister's Apprenticeship", author: "Johann Wolfgang von Goethe", year: 1796, genre: "fiction" },
    { id: "buddenbrooks_librivox", title: "Buddenbrooks", author: "Thomas Mann", year: 1901, genre: "fiction" }
];

// Descriptions for common books
const descriptions = {
    "The Art of War": "Ancient Chinese military treatise on strategy and tactics.",
    "Alice's Adventures in Wonderland": "A girl falls through a rabbit hole into a fantasy world.",
    "The Adventures of Tom Sawyer": "A boy grows up along the Mississippi River in Missouri.",
    "The Adventures of Sherlock Holmes": "Classic detective stories featuring the brilliant Sherlock Holmes.",
    "Moby Dick": "Captain Ahab's obsessive quest for the great white whale.",
    "Adventures of Huckleberry Finn": "A boy's journey down the Mississippi River with an escaped slave.",
    "Pride and Prejudice": "A classic tale of love and social standing in Regency-era England.",
    "Dracula": "The classic vampire story that started a genre.",
    "The Count of Monte Cristo": "A tale of betrayal, imprisonment, and revenge.",
    "Peter Pan": "The boy who never grows up takes children to Neverland.",
    "The Secret Garden": "An orphan discovers a hidden garden and finds healing.",
    "The Odyssey": "Homer's epic tale of Odysseus's journey home from Troy.",
    "Grimms' Fairy Tales": "Classic collection of German folk tales.",
    "A Tale of Two Cities": "A story of love and sacrifice during the French Revolution.",
    "Uncle Tom's Cabin": "A powerful anti-slavery novel that changed America.",
    "The Adventures of Pinocchio": "A wooden puppet dreams of becoming a real boy.",
    "Treasure Island": "A young boy embarks on a pirate adventure.",
    "Emma": "Jane Austen's comedy about a matchmaking young woman.",
    "The Memoirs of Sherlock Holmes": "More adventures of the great detective.",
    "Aesop's Fables": "Ancient fables with moral lessons.",
    "Jane Eyre": "An orphan finds love and independence as a governess.",
    "The Swiss Family Robinson": "A family builds a new life after being shipwrecked.",
    "Andersen's Fairy Tales": "Beautiful fairy tales including The Little Mermaid.",
    "The Return of Sherlock Holmes": "Holmes returns from the dead for more cases.",
    "Robinson Crusoe": "A man survives alone on a deserted island.",
    "Great Expectations": "A young orphan's journey to becoming a gentleman.",
    "The Game of Life and How to Play It": "A guide to using the power of thought.",
    "Anthem": "A dystopian novella about individuality and freedom.",
    "Bleak House": "Dickens' masterpiece about the endless Jarndyce lawsuit.",
    "Romeo and Juliet": "Shakespeare's tragedy of star-crossed lovers.",
    "Anne of Green Gables": "An orphan finds a home on Prince Edward Island.",
    "The Invisible Man": "A scientist discovers the secret of invisibility.",
    "Walden": "Thoreau's reflections on simple living in nature.",
    "The Time Machine": "A scientist travels to the distant future.",
    "The Wonderful Wizard of Oz": "Dorothy's magical journey through the land of Oz.",
    "English Fairy Tales": "Traditional English fairy tales.",
    "Penguin Island": "A satirical novel about penguins who become human.",
    "The Divine Comedy": "Dante's journey through Hell, Purgatory, and Paradise.",
    "Heart of Darkness": "A voyage up the Congo River into the heart of Africa.",
    "Beowulf": "The Old English epic poem of a hero battling monsters.",
    "Frankenstein": "A scientist creates life with disastrous consequences.",
    "The Gods of Mars": "John Carter's further adventures on Barsoom.",
    "The Science of Getting Rich": "New Thought principles for achieving wealth.",
    "The Importance of Being Earnest": "Wilde's witty comedy of manners.",
    "The War of the Worlds": "Martians invade Victorian England.",
    "Wuthering Heights": "A passionate tale of love and revenge on the Yorkshire moors.",
    "Gulliver's Travels": "A satirical voyage to strange lands.",
    "The Girl on the Boat": "A Wodehouse romantic comedy on an ocean liner.",
    "The Power of Concentration": "Lessons in developing mental focus.",
    "Little Women": "Four sisters grow up during the Civil War.",
    "A Princess of Mars": "John Carter is transported to Mars and finds adventure.",
    "The Three Musketeers": "Swashbuckling adventures of Athos, Porthos, and Aramis.",
    "First Love": "A tender novella about young romance.",
    "The Story of My Life": "Helen Keller's autobiography of triumph over adversity.",
    "The Merry Adventures of Robin Hood": "Classic retelling of the legendary outlaw.",
    "The Thirty-Nine Steps": "A thriller about a man caught up in a spy plot.",
    "My Man Jeeves": "Bertie Wooster and his brilliant valet Jeeves.",
    "Black Beauty": "The autobiography of a horse and his various owners.",
    "Kidnapped": "A young Scotsman's adventures in the Highlands.",
    "Collected Works of H.P. Lovecraft": "Tales of cosmic horror and the Cthulhu Mythos.",
    "Northanger Abbey": "Austen's parody of Gothic novels.",
    "This Side of Paradise": "Fitzgerald's debut about post-WWI youth.",
    "As a Man Thinketh": "A self-help classic on the power of thought.",
    "The Prince": "Machiavelli's treatise on political power.",
    "The Reluctant Dragon": "A peaceful dragon who prefers poetry.",
    "2 B R 0 2 B": "A satirical story about population control.",
    "Beyond Good and Evil": "Nietzsche's critique of traditional morality.",
    "The Railway Children": "Three children move near a railway line.",
    "Sense and Sensibility": "Two sisters navigate love and heartbreak.",
    "The Autobiography of Benjamin Franklin": "The life of a Founding Father.",
    "The Call of the Wild": "A dog's transformation in the Yukon wilderness.",
    "A Little Princess": "Sara Crewe's fortunes rise and fall at a boarding school.",
    "The Picture of Dorian Gray": "A portrait ages while its subject stays young.",
    "The Scarlet Pimpernel": "A hero rescues aristocrats from the guillotine.",
    "Oliver Twist": "An orphan navigates crime in Victorian London.",
    "The Mysterious Island": "Castaways use science to survive on an island.",
    "Meditations": "Marcus Aurelius's philosophical reflections.",
    "The Metamorphosis": "A man wakes up transformed into an insect.",
    "Les Misérables, Vol. 1": "An ex-convict seeks redemption in post-revolutionary France.",
    "The Hound of the Baskervilles": "Holmes investigates a supernatural hound.",
    "A Study in Scarlet": "The first Sherlock Holmes story.",
    "The Sign of the Four": "Holmes's second novel-length adventure.",
    "The Valley of Fear": "Holmes battles Professor Moriarty's organization.",
    "Around the World in Eighty Days": "Phileas Fogg's race against time.",
    "Journey to the Center of the Earth": "An expedition into a volcano.",
    "A Christmas Carol": "Scrooge learns the true meaning of Christmas.",
    "David Copperfield": "Dickens's semi-autobiographical novel.",
    "War and Peace": "An epic of Russian society during the Napoleonic wars.",
    "Anna Karenina": "A tragic story of love and society in imperial Russia.",
    "Crime and Punishment": "A student commits murder and faces the consequences.",
    "The Brothers Karamazov": "A profound exploration of faith and morality.",
    "Don Quixote": "A man imagines himself a knight and sets out on adventures.",
    "The Iliad": "Homer's epic of the Trojan War.",
    "Paradise Lost": "Milton's epic poem of the Fall of Man.",
    "Hamlet": "Shakespeare's tragedy of a prince's revenge.",
    "Macbeth": "Shakespeare's tragedy of ambition and murder.",
    "Othello": "Shakespeare's tragedy of jealousy and manipulation.",
    "King Lear": "Shakespeare's tragedy of a king who divides his kingdom.",
    "A Midsummer Night's Dream": "Shakespeare's magical comedy.",
    "The Merchant of Venice": "Shakespeare's complex drama of justice and mercy.",
    "The Tempest": "Shakespeare's magical final play.",
    "The Republic": "Plato's dialogue on justice and the ideal state.",
    "The Scarlet Letter": "A tale of sin and redemption in Puritan New England.",
    "Leaves of Grass": "Whitman's revolutionary poetry collection.",
    "The Raven and Other Poems": "Poe's most famous poem and others.",
    "The Fall of the House of Usher": "Poe's Gothic tale of decay and doom.",
    "The Tell-Tale Heart": "Poe's story of guilt and madness.",
    "The Age of Innocence": "A love triangle in 1870s New York society.",
    "The Turn of the Screw": "A governess sees ghosts - or does she?",
    "The Red Badge of Courage": "A young soldier faces the reality of war.",
    "The Jungle": "An exposé of the meatpacking industry.",
    "Dubliners": "Stories of life in early 20th century Dublin.",
    "Tess of the d'Urbervilles": "A young woman's tragic fate.",
    "Far from the Madding Crowd": "A woman chooses between three suitors.",
    "Middlemarch": "A panoramic view of English provincial life.",
    "Silas Marner": "A weaver finds redemption through a child.",
    "Vanity Fair": "A satirical portrait of English society.",
    "The Moonstone": "An early detective novel about a stolen diamond.",
    "The Woman in White": "A mystery involving identity and inheritance.",
    "North and South": "Industrial change and class conflict in England.",
    "Candide": "Voltaire's satirical tale of philosophy and adventure.",
    "Madame Bovary": "A doctor's wife seeks escape from provincial life.",
    "The Hunchback of Notre-Dame": "Quasimodo's tragic love story.",
    "The Phantom of the Opera": "A masked genius haunts the Paris Opera.",
    "Dead Souls": "A satirical novel about Russian serfdom.",
    "Notes from Underground": "A bitter man's philosophical confessions.",
    "The Death of Ivan Ilyich": "A man confronts his mortality.",
    "Fathers and Sons": "Generational conflict in 19th century Russia.",
    "The Cherry Orchard": "A family faces the loss of their estate.",
    "The Trial": "A man is arrested for an unspecified crime.",
    "The Castle": "A surveyor cannot reach the castle he's assigned to.",
    "Siddhartha": "A spiritual journey in ancient India.",
    "All Quiet on the Western Front": "The horror of WWI from a soldier's perspective.",
    "Death in Venice": "A writer becomes obsessed with a young boy.",
    "The Sorrows of Young Werther": "A young artist's doomed love.",
    "Faust": "A scholar makes a deal with the devil."
};

function generateBookId(title) {
    return title.toLowerCase()
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '') // Remove diacritics
        .replace(/[^a-z0-9\s]/g, '')
        .replace(/\s+/g, '-')
        .substring(0, 35);
}

function getDescription(title, author) {
    return descriptions[title] || `A classic work by ${author}.`;
}

// Process and add new books
let addedCount = 0;
let skippedCount = 0;
const newBooks = [];

for (const book of apiAudiobooks) {
    const normalizedTitle = book.title.toLowerCase().replace(/[^a-z0-9]/g, '');
    const bookId = generateBookId(book.title);

    // Skip if already exists (by title or ID)
    if (existingTitles.has(normalizedTitle) || existingIds.has(bookId)) {
        console.log(`Skipping (duplicate): ${book.title}`);
        skippedCount++;
        continue;
    }

    // Skip "Version 2/3" books (keep only originals)
    if (book.title.includes('Version 2') || book.title.includes('Version 3') || book.title.includes('(Solo)') || book.title.includes('(Original)') || book.title.includes('(Complete)')) {
        console.log(`Skipping (version/variant): ${book.title}`);
        skippedCount++;
        continue;
    }

    const newBook = {
        id: bookId,
        title: book.title,
        author: book.author,
        year: book.year,
        genre: book.genre,
        description: getDescription(book.title, book.author),
        cover: `https://covers.openlibrary.org/b/title/${encodeURIComponent(book.title)}-M.jpg`,
        audiobook: {
            available: true,
            archiveId: book.id,
            source: "LibriVox"
        },
        ebook: {
            available: false,
            gutenbergId: "",
            epubUrl: "",
            source: "Coming Soon"
        }
    };

    newBooks.push(newBook);
    addedCount++;
    console.log(`Adding: ${book.title}`);
}

// Add to existing data
existingData.books.push(...newBooks);

// Save
fs.writeFileSync(booksPath, JSON.stringify(existingData, null, 4));

console.log('\n=== BULK IMPORT COMPLETE ===');
console.log(`New books added: ${addedCount}`);
console.log(`Skipped (duplicates/versions): ${skippedCount}`);
console.log(`Total books now: ${existingData.books.length}`);
